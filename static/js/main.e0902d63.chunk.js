(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(208)},112:function(e,t,a){},206:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},207:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),l=a.n(r),c=(a(112),a(44)),i=a(45),s=a(55),u=a(56),m=a(10),d=["user-read-email"],p=a(95),g=a(242),y=a(243),f=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var h=f,b=a(13),v=(a(97),a(241)),E=(a(245),a(246)),k=a(96),w=a(47),j=a(12),O=a(94),S=a.n(O),x={name:"",id:"",token:"",tokenms:0,allPlaylists:[],filteredPlaylists:[],selectedAlbums:[],allAlbums:{},selectedPlaylists:[],progress:{done:0,total:0,percent:0},log:function(e,t){var a=t||"normal",n="> "+e;I.logArray.push({text:n,color:{start:"cornflowerblue",normal:"#ddd",end:"lightgreen",error:"red"}[a]});var o=document.getElementById("logger");o.scrollTop=o.scrollHeight+50},logArray:[],errors:[]};var I=Object(w.a)(null!=localStorage.getItem("user")?S()(x,JSON.parse(localStorage.getItem("user"))):x);Object(j.c)(function(){localStorage.setItem("user",JSON.stringify(I))}),window.user=I;var B=a(24),C=a.n(B),_=a(36),A=a(98),T=a(57),D=a(238),P=a(244),N=a(23),z=a.n(N);function G(e){for(var t=[],a=[],n=0;n<e.length;n++){var o=e[n],r=o.owner.display_name;"Spotify"!==r&&(r.indexOf(" ")>-1?t.push(o):a.push(o))}return[].concat(t,a)}var L=function(e){var t=e.token,a=Object(n.useState)(""),r=Object(b.a)(a,2),l=r[0],c=r[1],i=Object(n.useState)([]),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(0),p=Object(b.a)(d,2),g=p[0],y=p[1],f=Object(n.useState)([]),h=Object(b.a)(f,2),v=h[0],k=h[1],w=Object(n.useState)("none"),j=Object(b.a)(w,2),O=j[0],S=j[1],x=Object(n.useState)(0),I=Object(b.a)(x,2),B=(I[0],I[1],Object(n.useState)(0)),N=Object(b.a)(B,2),L=(N[0],N[1]),R=Object(n.useState)(0),J=Object(b.a)(R,2);J[0],J[1];Object(n.useEffect)(function(){console.log(t),document.getElementById("message").value=localStorage.getItem("message")||"Hey {first name},\nI stumbled on your {playlist name} playlist on Spotify (if it actually is your playlist? Haha) and I really enjoy it!\n\nA friend of mine, an aspiring instrumental pianist from Edmonton, Canada, recently released a new single that may fit nicely on your playlist! If you want to check it out, it\u2019s called {song name}.\n\n{song link}\n\nAnyway, thanks for reading my message and keep up your great taste in music! I\u2019m sorry for the unsolicited message, but I hope you enjoy the music and have a wonderful day!\n\nTyler"},[]);var F=function(){var e=Object(T.a)(C.a.mark(function e(a){var n,o,r,l,c,i;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.id,o=u.find(function(e){return e.id===n}),r=[],document.getElementById(a.target.id).parentElement.style.opacity=.2,e.prev=4,c="https://api.spotify.com/v1/playlists/".concat(n),e.next=8,z.a.get(c,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 8:200===(l=e.sent).status?(console.log("got data",l.data.name),i=l.data,r=Object(A.a)({},o,{playlist_url:i.external_urls.spotify,owner_url:i.owner.external_urls.spotify,followers:i.followers.total})):S("block"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),S("block");case 15:k([].concat(Object(_.a)(v),[r]));case 16:case"end":return e.stop()}},e,null,[[4,12]])}));return function(t){return e.apply(this,arguments)}}();function H(){return q.apply(this,arguments)}function q(){return(q=Object(T.a)(C.a.mark(function e(){var a,n,o,r,c,i,s,u,d,p;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(l),a=[],o=1,e.prev=3;case 4:return e.next=6,z.a.get(n||"https://api.spotify.com/v1/search?q=".concat(l,"&type=playlist&limit=50&offset=").concat(g),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 6:c=e.sent,n=c.data.playlists.next,(r=a).push.apply(r,Object(_.a)(c.data.playlists.items)),console.log("batch ".concat(o)),console.log(c),o++;case 12:if(n&&a.length<100){e.next=4;break}case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),S("block");case 18:y(g+a.length),i=a.length,a=G(a),L(i-a.length),s=[],u=0;case 24:if(!(u<a.length)){e.next=35;break}return d=a[u],console.log(u),e.next=29,z.a.get("https://api.spotify.com/v1/users/".concat(d.owner.id),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 29:p=e.sent,console.log(p),p.data.images.length>0&&s.push({id:d.id,name:d.name,owner:d.owner.display_name,image:p.data.images[0].url});case 32:u++,e.next=24;break;case 35:m(s);case 36:case"end":return e.stop()}},e,null,[[3,15]])}))).apply(this,arguments)}var M=function(){var e=Object(T.a)(C.a.mark(function e(){var t,a,n,o,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],a=JSON.parse(JSON.stringify(v)),n=0;n<a.length;n++)o=a[n],t[n]=[o.name,o.playlist_url,o.owner,o.owner_url,o.followers,document.getElementById("song-name").value,l,document.getElementById("fblink-".concat(o.id)).value||"nay","","yee",document.getElementById("user-name").value,"",new Date(Date.now()).toLocaleDateString()];for(r=0;r<t.length;r++)t[r]=t[r].join(" ## ");return document.getElementById("copy-text").value=t.join("\n"),e.abrupt("return",t.join("\n"));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),U=u.map(function(e){return o.a.createElement("div",{style:{width:220,background:"#ccc",margin:10,padding:10,position:"relative"},key:e.id},o.a.createElement("img",{src:e.image,alt:"owner",style:{width:"100%"},id:e.id,onClick:F}),o.a.createElement("p",null,o.a.createElement("strong",null,e.owner)),o.a.createElement("p",null,e.name))}),W=v.map(function(e){return o.a.createElement("div",{key:e.id,style:{display:"flex",flexDirection:"row"}},o.a.createElement("img",{src:e.image,height:100,alt:"pic"}),o.a.createElement("div",{style:{minWidth:400}},o.a.createElement("h3",{style:{margin:2,padding:5}},e.owner),o.a.createElement("h4",{style:{margin:2,padding:5}},e.name),o.a.createElement("p",{style:{margin:2,padding:5}},e.followers," followers")),o.a.createElement("div",null,o.a.createElement("a",{href:"https://www.facebook.com/search/people/?q=".concat(e.owner),target:"_blank",rel:"noopener noreferrer",onClick:function(){return function(e){var t=document.getElementById("message").value,a=document.getElementById("song-name").value,n=document.getElementById("song-link").value,o=t.replace("{first name}",e.owner.split(" ")[0]).replace("{playlist name}",e.name).replace("{song name}",a).replace("{song link}",n),r=document.createElement("textarea");r.style.position="fixed",r.style.top=0,r.style.left=0,r.style.width="2em",r.style.height="2em",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.value=o,document.body.appendChild(r),r.focus(),r.select();try{var l=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+l)}catch(c){console.log("Oops, unable to copy")}document.body.removeChild(r)}(e)}},"Search on Facebook"),o.a.createElement("br",null),o.a.createElement("input",{placeholder:"Paste FB here",id:"fblink-".concat(e.id)})))});return o.a.createElement(D.a,{fixed:!0,style:{marginTop:50}},o.a.createElement("h3",null,"1. Setup"),o.a.createElement(P.a,{id:"user-name",label:"Your Initials",variant:"outlined",style:{width:"50%",marginBottom:20}}),o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("token"),window.location.reload()}},"Get Spotify token"),o.a.createElement("br",null),o.a.createElement(P.a,{id:"song-name",label:"Promoting Song Name",variant:"outlined",style:{width:"50%",marginBottom:20}}),o.a.createElement(P.a,{id:"song-link",label:"Promoting Song Link",variant:"outlined",style:{width:"50%",marginBottom:20}}),o.a.createElement("br",null),o.a.createElement(P.a,{id:"song-link",label:"List of playlist links we've already got",variant:"outlined",style:{width:"50%",marginBottom:20}}),o.a.createElement("h3",null,"2. Make sure the message looks good"),o.a.createElement(P.a,{style:{width:"100%",minHeight:300},label:"Message",variant:"outlined",multiline:!0,id:"message"}),o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return localStorage.setItem("message",document.getElementById("message").value)}},"Save"),o.a.createElement("h3",null,"3. Search for playlists on Spotify"),o.a.createElement("div",null,o.a.createElement(P.a,{id:"outlined-basic",label:"Spotify Search Term",variant:"outlined",style:{width:"50%",marginBottom:20},onChange:function(e){c(e.target.value),console.log(e.key)},onKeyDown:function(e){"Enter"===e.key&&H()}}),o.a.createElement("br",null)),o.a.createElement("div",null,o.a.createElement("p",{style:{display:g>0?"block":"none"}},"Gathering playlists... User data received for"," ",u.length)),o.a.createElement("h3",null,"4. Pick promising playlists"),o.a.createElement("div",{style:{background:"green",display:"flex",flexDirection:"row",flexWrap:"wrap",borderRadius:20,marginTop:20}},U),o.a.createElement("br",null),o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return H()}},"Get 100 more"),o.a.createElement("h3",null,"5. Find and message them on Facebook"),o.a.createElement("ol",null,W),o.a.createElement("br",null),o.a.createElement("h3",null,"6. Generate text to paste into the tracking spreadsheet"),o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return M()}},"Generate Copy Text"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(P.a,{id:"copy-text",label:"Copy this",variant:"outlined",multiline:!0,style:{width:"50%",marginBottom:20}}),o.a.createElement("div",{style:{position:"fixed",display:O,width:"100%",height:50,background:"red",top:0,left:0,textAlign:"center"}},o.a.createElement("p",{style:{color:"white"}},"Error with Spotify request - please get new Spotify token (step 1)")))};var R=Object(v.a)(function(e){return{root:{flexGrow:1,height:"calc(100vh - 48px)"}}}),J=Object(w.b)(function(e){R();var t=e.token,a=Object(n.useState)(0),r=Object(b.a)(a,2),l=(r[0],r[1],Object(n.useState)(I.tokenms-Date.now())),c=Object(b.a)(l,2),i=c[0],s=c[1];Object(n.useEffect)(function(){var e=setInterval(function(){if(s(I.tokenms-Date.now()),i<1e3)try{e.clear()}catch(t){console.log("Tried to clear interval, could not. Oh well.")}},6e4)},[]);var u=Object(k.a)({url:"https://api.spotify.com/v1/me",method:"GET",headers:{Authorization:"Bearer "+t}}),m=Object(b.a)(u,1)[0],d=m.data,p=m.loading,g=m.error;p&&console.log("Loading user..."),d&&(I.name=d.display_name,I.id=d.id);return""!==I.id?o.a.createElement(L,{token:t}):g?o.a.createElement("div",null,o.a.createElement("p",null,"If you're seeing this, click this button, then refresh the page."),o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("token","")}},"Clear Token")):o.a.createElement("div",null,o.a.createElement("p",null,"Loading..."))});a(206),a(207);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var o=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var H=Object(p.a)({palette:{primary:{main:"#0a5e54"},secondary:{main:"#ede8e5"}}}),q=function(e){Object(s.a)(a,e);var t=F(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=h.access_token||localStorage.getItem("token");h.access_token&&(I.tokenms=Date.now()+18e5),e&&(this.setState({token:e}),localStorage.setItem("token",e),I.token=e)}},{key:"clearLocalStorage",value:function(){localStorage.setItem("token","")}},{key:"render",value:function(){return o.a.createElement(g.a,{theme:H},o.a.createElement("header",null,o.a.createElement("div",{className:"App"},o.a.createElement("div",null,!this.state.token&&o.a.createElement("div",{className:"App-header"},o.a.createElement(y.a,{variant:"h1",component:"h1",style:{textShadow:"0px 5px 10px rgba(0,0,0,0.9)"}},"Playpasting Time"),o.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("149f235f7ad941419d900b585b05d9e3","&redirect_uri=").concat("https://brandoshizzle.github.io/Playpaster/","&scope=").concat(d.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")))),this.state.token&&o.a.createElement(J,{token:this.state.token})))}}]),a}(n.Component);l.a.render(o.a.createElement(q,null),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.e0902d63.chunk.js.map