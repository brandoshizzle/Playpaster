(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){e.exports=a(207)},112:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(7),o=a.n(r),c=(a(112),a(44)),i=a(45),s=a(55),u=a(56),m=a(10),d=["user-read-email"],p=a(95),g=a(241),y=a(242),f=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var h=f,b=a(11),v=(a(97),a(240)),E=(a(244),a(245)),w=a(96),k=a(47),O=a(13),S=a(94),I=a.n(S),x={name:"",id:"",token:"",tokenms:0,allPlaylists:[],filteredPlaylists:[],selectedAlbums:[],allAlbums:{},selectedPlaylists:[],progress:{done:0,total:0,percent:0},log:function(e,t){var a=t||"normal",n="> "+e;j.logArray.push({text:n,color:{start:"cornflowerblue",normal:"#ddd",end:"lightgreen",error:"red"}[a]});var l=document.getElementById("logger");l.scrollTop=l.scrollHeight+50},logArray:[],errors:[]};var j=Object(k.a)(null!=localStorage.getItem("user")?I()(x,JSON.parse(localStorage.getItem("user"))):x);Object(O.c)(function(){localStorage.setItem("user",JSON.stringify(j))}),window.user=j;var B=a(24),C=a.n(B),_=a(36),N=a(98),T=a(57),P=a(239),A=a(243),D=a(23),J=a.n(D);function R(e){for(var t=[],a=[],n=0;n<e.length;n++){var l=e[n],r=l.owner.display_name;"Spotify"!==r&&(r.indexOf(" ")>-1?t.push(l):1===(r.match(/./g)||[]).length?(l.owner.display_name=r.split(".").join(" "),t.push(l)):a.push(l))}return t}function L(e){var t=localStorage.getItem("previousPlaylists"),a=[];if(!t)return e;for(var n=0;n<e.length;n++)-1===t.indexOf(e[n].id)&&a.push(e[n]);return a}var F=function(e){var t=e.token,a=Object(n.useState)(""),r=Object(b.a)(a,2),o=r[0],c=r[1],i=Object(n.useState)([]),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(0),p=Object(b.a)(d,2),g=p[0],y=p[1],f=Object(n.useState)([]),h=Object(b.a)(f,2),v=h[0],w=h[1],k=Object(n.useState)("none"),O=Object(b.a)(k,2),S=O[0],I=O[1],x=Object(n.useState)(0),j=Object(b.a)(x,2),B=j[0],D=j[1],F=Object(n.useState)(0),z=Object(b.a)(F,2),G=z[0],M=z[1],H=Object(n.useState)(0),q=Object(b.a)(H,2),U=q[0],K=q[1],W=Object(n.useState)([]),Y=Object(b.a)(W,2),Q=Y[0],V=Y[1],X=Object(n.useState)(0),Z=Object(b.a)(X,2),$=Z[0],ee=Z[1];Object(n.useEffect)(function(){console.log(t),document.getElementById("message").value=localStorage.getItem("message")||"Hey {first name},\nI stumbled on your {playlist name} playlist on Spotify (if it actually is your playlist) and I really enjoy it!\n\nA friend of mine, an aspiring instrumental pianist from Edmonton, Canada, recently released a new single that may fit nicely on your playlist! If you want to check it out, it\u2019s called {song name}, a link is below.\n\nThanks for reading my message and keep up your great taste in music! Sorry for the unsolicited message, but I hope you enjoy the music and have a wonderful day!\n\nTyler\n\n{song link}",document.getElementById("user-name").value=localStorage.getItem("userName")||"",document.getElementById("song-name").value=localStorage.getItem("songName")||"",document.getElementById("song-link").value=localStorage.getItem("songLink")||""},[]);function te(){return ae.apply(this,arguments)}function ae(){return(ae=Object(T.a)(C.a.mark(function e(){var a,n,l,r,c,i,s,u,d,p,f,h,b;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(o),a=[],e.prev=2;case 3:return e.next=5,J.a.get(n||"https://api.spotify.com/v1/search?q=".concat(o,"&type=playlist&limit=50&offset=").concat(g),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 5:r=e.sent,n=r.data.playlists.next,(l=a).push.apply(l,Object(_.a)(r.data.playlists.items)),console.log(r),K(r.data.playlists.total);case 10:if(n&&a.length<100){e.next=3;break}case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),I("block");case 16:c=g+a.length,y(c),i=a.length,console.log(i),a=R(a),s=i-a.length,console.log(s),D(s),a=L(a),u=i-s-a.length,console.log(u),M(u),d=[],p=0,f=0;case 31:if(!(f<a.length)){e.next=48;break}return h=a[f],console.log(f),b=void 0,e.prev=35,e.next=38,J.a.get("https://api.spotify.com/v1/users/".concat(h.owner.id),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 38:b=e.sent,e.next=44;break;case 41:return e.prev=41,e.t1=e.catch(35),e.abrupt("continue",45);case 44:b.data.images.length>0?d.push({id:h.id,name:h.name,owner:h.owner.display_name,ownerId:h.owner.id,image:b.data.images[0].url}):p++;case 45:f++,e.next=31;break;case 48:ee(p),m(d);case 50:case"end":return e.stop()}},e,null,[[2,13],[35,41]])}))).apply(this,arguments)}var ne=function(){var e=Object(T.a)(C.a.mark(function e(a){var n,l,r,o,c,i;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.id,l=u.find(function(e){return e.id===n}),r=[],document.getElementById(a.target.id).parentElement.style.opacity=.2,e.prev=4,c="https://api.spotify.com/v1/playlists/".concat(n),e.next=8,J.a.get(c,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 8:200===(o=e.sent).status?(console.log("got data",o.data.name),(i=o.data).followers.total>3&&(r=Object(N.a)({},l,{playlist_url:i.external_urls.spotify,owner_url:i.owner.external_urls.spotify,followers:i.followers.total}),w([].concat(Object(_.a)(v),[r])))):I("block"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),I("block");case 15:case"end":return e.stop()}},e,null,[[4,12]])}));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(T.a)(C.a.mark(function e(){var t,a,n,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],a=JSON.parse(JSON.stringify(v)),n=0;n<a.length;n++)r=a[n],t[n]=l.a.createElement("tr",{key:n},l.a.createElement("td",null,r.name),l.a.createElement("td",null,r.playlist_url),l.a.createElement("td",null,r.owner),l.a.createElement("td",null,r.owner_url),l.a.createElement("td",null,r.followers),l.a.createElement("td",null,document.getElementById("song-name").value),l.a.createElement("td",null,o),l.a.createElement("td",null,document.getElementById("fblink-".concat(r.id)).value||"nay"),l.a.createElement("td",null,""),l.a.createElement("td",null,document.getElementById("messaged-".concat(r.id)).checked?"yee":"nay"),l.a.createElement("td",null,document.getElementById("messaged-".concat(r.id)).checked?document.getElementById("user-name").value:""),l.a.createElement("td",null,""),l.a.createElement("td",null,document.getElementById("messaged-".concat(r.id)).checked?new Date(Date.now()).toLocaleDateString():""));V(t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),re=u.map(function(e){return l.a.createElement("div",{style:{width:220,background:"#ccc",margin:10,padding:10,position:"relative"},key:e.id},l.a.createElement("img",{src:e.image,alt:"FB pic not loading - click to view",style:{width:"100%"},id:e.id,onClick:ne}),l.a.createElement("p",null,l.a.createElement("strong",null,e.owner)),l.a.createElement("p",null,e.name))}),oe=v.map(function(e){return l.a.createElement("div",{key:e.id,style:{display:"flex",flexDirection:"row",width:"100%",margin:10}},l.a.createElement("a",{href:e.image,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:e.image,width:100,alt:"FB pic not loading - click to view"})),l.a.createElement("div",{style:{width:"40%"}},l.a.createElement("h3",{style:{margin:2,padding:5}},e.owner),l.a.createElement("h4",{style:{margin:2,padding:5}},e.name),l.a.createElement("p",{style:{margin:2,padding:5}},e.followers," followers")),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("a",{href:"https://www.facebook.com/search/people/?q=".concat(e.owner),style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer",onClick:function(){return function(e){var t=document.getElementById("message").value,a=document.getElementById("song-name").value,n=document.getElementById("song-link").value,l=t.replace("{first name}",e.owner.split(" ")[0]).replace("{playlist name}",e.name).replace("{song name}",a).replace("{song link}",n),r=document.createElement("textarea");r.style.position="fixed",r.style.top=0,r.style.left=0,r.style.width="2em",r.style.height="2em",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.value=l,document.body.appendChild(r),r.focus(),r.select();try{var o=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+o)}catch(c){console.log("Oops, unable to copy")}document.body.removeChild(r)}(e)}},l.a.createElement(E.a,{variant:"contained",style:{width:210,marginTop:8,marginRight:5},color:JSON.parse(localStorage.getItem("previousOwners")).indexOf(e.ownerId)>-1?"default":"primary"},JSON.parse(localStorage.getItem("previousOwners")).indexOf(e.ownerId)>-1?"Owner in database":"Search on Facebook")),l.a.createElement(A.a,{style:{flex:1},label:"Paste FB Here",variant:"outlined",id:"fblink-".concat(e.id)}),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"messaged-".concat(e.id),name:"messaged",disabled:JSON.parse(localStorage.getItem("previousOwners")).indexOf(e.ownerId)>-1})," ","Messaged them")))});return l.a.createElement(P.a,{fixed:!0,style:{marginTop:50}},l.a.createElement("h3",null,"1. Setup"),l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("token"),window.location.reload()}},"Get Spotify token"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(A.a,{id:"user-name",label:"Your Initials",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement("br",null),l.a.createElement(A.a,{id:"song-name",label:"Promoting Song Name",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement(A.a,{id:"song-link",label:"Promoting Song Link",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement("br",null),l.a.createElement(A.a,{id:"previous-playlists",label:"Playlist URLs from spreadsheet",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement(A.a,{id:"previous-owners",label:"Owner URLs from spreadsheet",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement("br",null),l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=document.getElementById("previous-playlists").value,t=e.indexOf("https"),a=(e=e.substring(t)).split(" ");a=a.map(function(e,t){var a=e.lastIndexOf("/");return e.substring(a+1)}),localStorage.setItem("previousPlaylists",JSON.stringify(a));var n=document.getElementById("previous-owners").value;t=n.indexOf("https");var l=(n=n.substring(t)).split(" ");l=l.map(function(e,t){var a=e.lastIndexOf("/");return e.substring(a+1)}),localStorage.setItem("previousOwners",JSON.stringify(l)),localStorage.setItem("userName",document.getElementById("user-name").value),localStorage.setItem("songName",document.getElementById("song-name").value),localStorage.setItem("songLink",document.getElementById("song-link").value)}()}},"Save Setup"),l.a.createElement("h3",null,"2. Make sure the message looks good"),l.a.createElement(A.a,{style:{width:"100%",minHeight:300},label:"Message",variant:"outlined",multiline:!0,id:"message"}),l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return localStorage.setItem("message",document.getElementById("message").value)}},"Save Message"),l.a.createElement("h3",null,"3. Search for playlists on Spotify"),l.a.createElement("div",null,l.a.createElement(A.a,{id:"outlined-basic",label:"Spotify Search Term",variant:"outlined",style:{width:"50%",marginBottom:20},onChange:function(e){c(e.target.value),console.log(e.key)},onKeyDown:function(e){"Enter"===e.key&&te()}}),l.a.createElement("br",null)),l.a.createElement("div",null,l.a.createElement("p",{style:{display:g>0?"block":"none"}},"Gathering 100 playlists out of ",U,"... Filtered"," ",B," unlikely names... Filtered"," ",G," previously logged playlists... Filtered"," ",$," without profile pictures... Returning"," ",u.length,".")),l.a.createElement("h3",null,"4. Pick promising playlists"),l.a.createElement("div",{style:{background:"green",display:"flex",flexDirection:"row",flexWrap:"wrap",borderRadius:20,marginTop:20}},re),l.a.createElement("br",null),l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return te()}},"Get 100 more"),l.a.createElement("h3",null,"5. Find and message them on Facebook"),l.a.createElement("ol",null,oe),l.a.createElement("br",null),l.a.createElement("h3",null,"6. Generate text to paste into the tracking spreadsheet"),l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){return le()}},"Generate Copy Text"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("table",{style:{width:"100%",border:"2px solid black"}},Q),l.a.createElement("div",{style:{position:"fixed",display:S,width:"100%",height:50,background:"red",top:0,left:0,textAlign:"center"}},l.a.createElement("p",{style:{color:"white"}},"Error with Spotify request - please get new Spotify token (step 1)")))};var z=Object(v.a)(function(e){return{root:{flexGrow:1,height:"calc(100vh - 48px)"}}}),G=Object(k.b)(function(e){z();var t=e.token,a=Object(n.useState)(0),r=Object(b.a)(a,2),o=(r[0],r[1],Object(n.useState)(j.tokenms-Date.now())),c=Object(b.a)(o,2),i=c[0],s=c[1];Object(n.useEffect)(function(){var e=setInterval(function(){if(s(j.tokenms-Date.now()),i<1e3)try{e.clear()}catch(t){console.log("Tried to clear interval, could not. Oh well.")}},6e4)},[]);var u=Object(w.a)({url:"https://api.spotify.com/v1/me",method:"GET",headers:{Authorization:"Bearer "+t}}),m=Object(b.a)(u,1)[0],d=m.data,p=m.loading,g=m.error;p&&console.log("Loading user..."),d&&(j.name=d.display_name,j.id=d.id);return""!==j.id?l.a.createElement(F,{token:t}):g?l.a.createElement("div",null,l.a.createElement("p",null,"If you're seeing this, click this button, then refresh the page."),l.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("token","")}},"Clear Token")):l.a.createElement("div",null,l.a.createElement("p",null,"Loading..."))});a(206);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var l=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var H=Object(p.a)({palette:{primary:{main:"#0a5e54"},secondary:{main:"#ede8e5"}}}),q=function(e){Object(s.a)(a,e);var t=M(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=h.access_token||localStorage.getItem("token");h.access_token&&(j.tokenms=Date.now()+18e5),e&&(this.setState({token:e}),localStorage.setItem("token",e),j.token=e)}},{key:"clearLocalStorage",value:function(){localStorage.setItem("token","")}},{key:"render",value:function(){return l.a.createElement(g.a,{theme:H},l.a.createElement("header",null,l.a.createElement("div",{className:"App"},l.a.createElement("div",null,!this.state.token&&l.a.createElement("div",{className:"App-header"},l.a.createElement(y.a,{variant:"h1",component:"h1",style:{textShadow:"0px 5px 10px rgba(0,0,0,0.9)"}},"Playpasting Time"),l.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("149f235f7ad941419d900b585b05d9e3","&redirect_uri=").concat("https://brandoshizzle.github.io/Playpaster/","&scope=").concat(d.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")))),this.state.token&&l.a.createElement(G,{token:this.state.token})))}}]),a}(n.Component);o.a.render(l.a.createElement(q,null),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.88f35d94.chunk.js.map