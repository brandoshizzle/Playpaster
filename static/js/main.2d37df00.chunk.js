(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a(207)},111:function(e,t,a){},205:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},206:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),c=a.n(r),l=(a(111),a(44)),i=a(45),s=a(55),u=a(56),p=a(10),m=["user-read-email"],d=a(95),g=a(241),f=a(242),h=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var y=h,b=a(16),v=(a(97),a(240)),k=(a(244),a(245)),E=a(96),j=a(47),O=a(12),w=a(94),x=a.n(w),S={name:"",id:"",token:"",tokenms:0,allPlaylists:[],filteredPlaylists:[],selectedAlbums:[],allAlbums:{},selectedPlaylists:[],progress:{done:0,total:0,percent:0},log:function(e,t){var a=t||"normal",n="> "+e;_.logArray.push({text:n,color:{start:"cornflowerblue",normal:"#ddd",end:"lightgreen",error:"red"}[a]});var o=document.getElementById("logger");o.scrollTop=o.scrollHeight+50},logArray:[],errors:[]};var _=Object(j.a)(null!=localStorage.getItem("user")?x()(S,JSON.parse(localStorage.getItem("user"))):S);Object(O.c)(function(){localStorage.setItem("user",JSON.stringify(_))}),window.user=_;var C=a(30),I=a.n(C),A=a(63),T=a(36),N=a(237),B=a(243),D=a(23),R=a.n(D);function G(e){for(var t=[],a=[],n=0;n<e.length;n++){var o=e[n],r=o.owner.display_name;"Spotify"!==r&&(r.indexOf(" ")>-1?t.push(o):a.push(o))}return[].concat(t,a)}var J=function(e){var t=e.token,a=Object(n.useState)(""),r=Object(b.a)(a,2),c=r[0],l=r[1],i=Object(n.useState)([]),s=Object(b.a)(i,2),u=s[0],p=s[1],m=Object(n.useState)(0),d=Object(b.a)(m,2),g=d[0],f=d[1],h=Object(n.useState)([]),y=Object(b.a)(h,2),v=y[0],E=y[1];Object(n.useEffect)(function(){console.log(t)},[]);var j=function(e){var t=e.target.id;document.getElementById(e.target.id).parentElement.style.opacity=.2,E([].concat(Object(T.a)(v),[t]))};function O(){return w.apply(this,arguments)}function w(){return(w=Object(A.a)(I.a.mark(function e(){var a,n,o,r,l,i,s,u,m;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(c),a=[],o=1;case 3:return e.next=5,R.a.get(n||"https://api.spotify.com/v1/search?q=".concat(c,"&type=playlist&limit=50&offset=").concat(g),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 5:l=e.sent,n=l.data.playlists.next,(r=a).push.apply(r,Object(T.a)(l.data.playlists.items)),console.log("batch ".concat(o)),console.log(l),o++;case 11:if(n&&a.length<100){e.next=3;break}case 12:f(g+a.length),a=G(a),console.log(a),i=[],s=0;case 17:if(!(s<a.length)){e.next=28;break}return u=a[s],console.log(s),e.next=22,R.a.get("https://api.spotify.com/v1/users/".concat(u.owner.id),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 22:m=e.sent,console.log(m),m.data.images.length>0&&i.push({id:u.id,name:u.name,author:u.owner.display_name,image:m.data.images[0].url});case 25:s++,e.next=17;break;case 28:p(i);case 29:case"end":return e.stop()}},e)}))).apply(this,arguments)}var x=function(){var e=Object(A.a)(I.a.mark(function e(){var a,n,o,r,c,l,i,s;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=JSON.parse(JSON.stringify(v)),o=0;case 3:if(!(o<n.length)){e.next=22;break}return r=n[o],console.log(r),e.prev=6,c=void 0,l="https://api.spotify.com/v1/playlists/".concat(r),e.next=11,R.a.get(l,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 11:200===(c=e.sent).status?(console.log("got data",c.data.name),i=c.data,a[o]=[i.name,i.external_urls.spotify,i.owner.display_name,i.owner.external_urls.spotify,i.followers.total]):console.log("Getting data gave us an error. Not cool man."),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),console.log("Getting data gave us an error. Not cool man."),console.log(e.t0);case 19:o++,e.next=3;break;case 22:for(console.log("All done boss."),s=0;s<a.length;s++)a[s]=a[s].join(" ## ");return document.getElementById("copy-text").value=a.join("\n"),e.abrupt("return",a.join("\n"));case 26:case"end":return e.stop()}},e,null,[[6,15]])}));return function(){return e.apply(this,arguments)}}(),S=u.map(function(e){return o.a.createElement("div",{style:{width:220,background:"#ccc",margin:10,padding:10,position:"relative"},key:e.id},o.a.createElement("img",{src:e.image,alt:"author",style:{width:"100%"},id:e.id,onClick:j}),o.a.createElement("p",null,o.a.createElement("strong",null,e.author)),o.a.createElement("p",null,e.name))}),_=v.map(function(e){return o.a.createElement("li",{key:e},e)});return o.a.createElement(N.a,{fixed:!0,style:{marginTop:50}},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(B.a,{id:"outlined-basic",label:"Spotify Search Term",variant:"outlined",style:{width:"50%",marginBottom:20},onChange:function(e){l(e.target.value),console.log(e.key)},onKeyDown:function(e){"Enter"===e.key&&O()}})," ",o.a.createElement("br",null)),o.a.createElement("div",{style:{background:"green",display:"flex",flexDirection:"row",flexWrap:"wrap",borderRadius:20,marginTop:20}},S),o.a.createElement("br",null),o.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return O()}},"Get 100 more"),o.a.createElement("h3",null,"Playlists you're exporting"),o.a.createElement("ol",null,_),o.a.createElement("br",null),o.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){return x()}},"Generate Copy Text"),o.a.createElement("h3",null,"Copy Text"),o.a.createElement("textarea",{id:"copy-text"},"beans\nbeans"))};var P=Object(v.a)(function(e){return{root:{flexGrow:1,height:"calc(100vh - 48px)"}}}),z=Object(j.b)(function(e){P();var t=e.token,a=Object(n.useState)(0),r=Object(b.a)(a,2),c=(r[0],r[1],Object(n.useState)(_.tokenms-Date.now())),l=Object(b.a)(c,2),i=l[0],s=l[1];Object(n.useEffect)(function(){var e=setInterval(function(){if(s(_.tokenms-Date.now()),i<1e3)try{e.clear()}catch(t){console.log("Tried to clear interval, could not. Oh well.")}},6e4)},[]);var u=Object(E.a)({url:"https://api.spotify.com/v1/me",method:"GET",headers:{Authorization:"Bearer "+t}}),p=Object(b.a)(u,1)[0],m=p.data,d=p.loading,g=p.error;d&&console.log("Loading user..."),m&&(_.name=m.display_name,_.id=m.id);return""!==_.id?o.a.createElement(J,{token:t}):g?o.a.createElement("div",null,o.a.createElement("p",null,"If you're seeing this, click this button, then refresh the page."),o.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("token","")}},"Clear Token")):o.a.createElement("div",null,o.a.createElement("p",null,"Loading..."))});a(205),a(206);function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var o=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var q=Object(d.a)({palette:{primary:{main:"#0a5e54"},secondary:{main:"#ede8e5"}}}),H=function(e){Object(s.a)(a,e);var t=L(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=y.access_token||localStorage.getItem("token");y.access_token&&(_.tokenms=Date.now()+18e5),e&&(this.setState({token:e}),localStorage.setItem("token",e),_.token=e)}},{key:"clearLocalStorage",value:function(){localStorage.setItem("token","")}},{key:"render",value:function(){return o.a.createElement(g.a,{theme:q},o.a.createElement("header",null,o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"bg"},!this.state.token&&o.a.createElement("div",{className:"App-header"},o.a.createElement(f.a,{variant:"h1",component:"h1",style:{textShadow:"0px 5px 10px rgba(0,0,0,0.9)"}},"Little Conductor"),o.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("149f235f7ad941419d900b585b05d9e3","&redirect_uri=").concat("http://localhost:3000/redirect","&scope=").concat(m.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")))),this.state.token&&o.a.createElement(z,{token:this.state.token})))}}]),a}(n.Component);c.a.render(o.a.createElement(H,null),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.2d37df00.chunk.js.map