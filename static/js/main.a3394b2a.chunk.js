(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){e.exports=a(214)},119:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(7),o=a.n(r),i=(a(119),a(48)),s=a(49),c=a(59),m=a(60),u=a(10),d=["user-read-email"],p=a(101),g=a(251),y=a(252),f=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var h=f,b=a(11),v=a(243),E=a(102),w=a(51),k=a(13),S=a(99),O=a.n(S),I={name:"",id:"",token:"",tokenms:0,allPlaylists:[],filteredPlaylists:[],selectedAlbums:[],allAlbums:{},selectedPlaylists:[],progress:{done:0,total:0,percent:0},log:function(e,t){var a=t||"normal",n="> "+e;x.logArray.push({text:n,color:{start:"cornflowerblue",normal:"#ddd",end:"lightgreen",error:"red"}[a]});var l=document.getElementById("logger");l.scrollTop=l.scrollHeight+50},logArray:[],errors:[]};var x=Object(w.a)(null!=localStorage.getItem("user")?O()(I,JSON.parse(localStorage.getItem("user"))):I);Object(k.c)(function(){localStorage.setItem("user",JSON.stringify(x))}),window.user=x;var j=a(24),B=a.n(j),C=a(40),A=a(103),N=a(61),D=a(250),P=a(254),T=a(255),_=a(256),F=a(249),R=a(253),L=a(23),z=a.n(L);function J(e){for(var t=[],a=[],n=0;n<e.length;n++){var l=e[n],r=l.owner.display_name;"Spotify"!==r&&(r.indexOf(" ")>-1?t.push(l):1===(r.match(/./g)||[]).length?(l.owner.display_name=r.split(".").join(" "),t.push(l)):a.push(l))}return t}function W(e,t){var a=localStorage.getItem("previousPlaylists"),n=[];if(!a)return e;for(var l=0;l<e.length;l++)-1===a.indexOf(e[l].id)&&-1===t.indexOf(e[l].id)&&n.push(e[l]);return n}var H=[{name:"Ikigai",artist:"River Camille",link:"https://open.spotify.com/track/58CHyyhA4uzNeO3FP79Pbt?si=EGh17FVmQrKwvCzdQACYPg"},{name:"A Wander in the Dark To Nowhere",artist:"With Dogs",link:"https://open.spotify.com/track/7mx3Hy3F4sVrEH8wISRKLv?si=FDeHBzyCSAWwI7jObNVfqQ"},{name:"Phoenix",artist:"With Dogs",link:"https://open.spotify.com/track/4GSuMPE13V5Dnp7NeAAA9F?si=yi-aMXj3Qx6neqfcWI5EQw"},{name:"Zora",artist:"With Dogs",link:"https://open.spotify.com/track/58CHyyhA4uzNeO3FP79Pbt?si=EGh17FVmQrKwvCzdQACYPg"}],G={"With Dogs":"With Dogs is an up-and-coming Canadian pianist with strong classical influences.","River Camille":"River Camille is the piano alias of David Shoults, a Canadian musician and producer."},M=function(e){var t=e.token,a=Object(n.useState)(""),r=Object(b.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)([]),c=Object(b.a)(s,2),m=c[0],u=c[1],d=Object(n.useState)(0),p=Object(b.a)(d,2),g=p[0],y=p[1],f=Object(n.useState)([]),h=Object(b.a)(f,2),E=h[0],w=h[1],k=Object(n.useState)("none"),S=Object(b.a)(k,2),O=S[0],I=S[1],x=Object(n.useState)(0),j=Object(b.a)(x,2),L=j[0],M=j[1],Q=Object(n.useState)(0),q=Object(b.a)(Q,2),V=q[0],K=q[1],U=Object(n.useState)(0),Y=Object(b.a)(U,2),X=Y[0],Z=Y[1],$=Object(n.useState)([]),ee=Object(b.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(0),le=Object(b.a)(ne,2),re=le[0],oe=le[1],ie=Object(n.useState)(localStorage.getItem("songName")||"Ikigai"),se=Object(b.a)(ie,2),ce=se[0],me=se[1],ue=[];Object(n.useEffect)(function(){console.log(t),document.getElementById("message-small").value=localStorage.getItem("message-small")||"Hello {first name},\n\nMy name is {your first name} and I'm with a group called Little Symphony Records. We help emerging artists get their music off the page and into peoples ears!\n\nI came across your playlist \"{playlist name}\", and I was wondering if you'd consider adding a song to it? {artist flavour text} I think they would be a good fit! (Song link below)\n\nBeing added to your playlist could be a game changer for {artist name}!\n\nThanks for reading this, and keep having such good taste in music,\n\n{your first name}\n\n{song link}",document.getElementById("message-big").value=localStorage.getItem("message-big")||"Hello {first name},\n\nMy name is {your first name} and I'm with a group called Little Symphony Records. We help emerging artists get their music off the page and into peoples ears!\n\nI came across your playlist \"{playlist name}\", and I was wondering if you'd consider adding a song to it? {artist flavour text} I think they would be a good fit! (Song link below)\n\nBeing added to your playlist could be a game changer for {artist name},\n\nThanks for reading this, and keep having such good taste in music.\n\n{your first name}\n\n{song link}",document.getElementById("user-name").value=localStorage.getItem("userName")||"",ue=localStorage.getItem("tooFewFollowersList")||[]},[]);function de(){return pe.apply(this,arguments)}function pe(){return(pe=Object(N.a)(B.a.mark(function e(){var a,n,l,r,i,s,c,m,d,p,f,h,b;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(o),a=[],e.prev=2;case 3:return e.next=5,z.a.get(n||"https://api.spotify.com/v1/search?q=".concat(o,"&type=playlist&limit=50&offset=").concat(g),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 5:r=e.sent,n=r.data.playlists.next,(l=a).push.apply(l,Object(C.a)(r.data.playlists.items)),console.log(r),Z(r.data.playlists.total);case 10:if(n&&a.length<100){e.next=3;break}case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),I("block");case 16:i=g+a.length,y(i),s=a.length,console.log(s),a=J(a),c=s-a.length,console.log(c),M(c),a=W(a,ue),m=s-c-a.length,console.log(m),K(m),d=[],p=0,f=0;case 31:if(!(f<a.length)){e.next=48;break}return h=a[f],console.log(f),b=void 0,e.prev=35,e.next=38,z.a.get("https://api.spotify.com/v1/users/".concat(h.owner.id),{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 38:b=e.sent,e.next=44;break;case 41:return e.prev=41,e.t1=e.catch(35),e.abrupt("continue",45);case 44:b.data.images.length>0?d.push({id:h.id,name:h.name,owner:h.owner.display_name,ownerId:h.owner.id,image:b.data.images[0].url}):p++;case 45:f++,e.next=31;break;case 48:oe(p),u(d);case 50:case"end":return e.stop()}},e,null,[[2,13],[35,41]])}))).apply(this,arguments)}var ge=function(){var e=Object(N.a)(B.a.mark(function e(a){var n,l,r,o,i,s;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.id,l=m.find(function(e){return e.id===n}),r=[],document.getElementById(a.target.id).parentElement.style.opacity=.2,e.prev=4,i="https://api.spotify.com/v1/playlists/".concat(n),e.next=8,z.a.get(i,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});case 8:200===(o=e.sent).status?(console.log("got data",o.data.name),(s=o.data).followers.total>3?(r=Object(A.a)({},l,{playlist_url:s.external_urls.spotify,owner_url:s.owner.external_urls.spotify,followers:s.followers.total}),w([].concat(Object(C.a)(E),[r]))):ue.push(n)):I("block"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),I("block");case 15:case"end":return e.stop()}},e,null,[[4,12]])}));return function(t){return e.apply(this,arguments)}}(),ye=function(e){var t=document.getElementById("message-small").value,a=H.filter(function(e){return e.name===ce})[0],n=t.replaceAll("{first name}",e.owner.split(" ")[0]).replaceAll("{playlist name}",e.name).replaceAll("{song name}",a.name).replaceAll("{song link}",a.link).replaceAll("{artist name}",a.artist).replaceAll("{artist flavour text}",G[a.artist]).replaceAll("{your first name}",document.getElementById("user-name").value.split(" ")[0]),l=document.createElement("textarea");l.style.position="fixed",l.style.top=0,l.style.left=0,l.style.width="2em",l.style.height="2em",l.style.padding=0,l.style.border="none",l.style.outline="none",l.style.boxShadow="none",l.style.background="transparent",l.value=n,document.body.appendChild(l),l.focus(),l.select();try{var r=document.execCommand("copy")?"successful":"unsuccessful";console.log("Copying text command was "+r)}catch(o){console.log("Oops, unable to copy")}document.body.removeChild(l)},fe=function(){var e=Object(N.a)(B.a.mark(function e(){var t,a,n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],localStorage.setItem("tooFewFollowersList",JSON.stringify(ue)),a=JSON.parse(JSON.stringify(E)),n=0;n<a.length;n++)r=a[n],t[n]=l.a.createElement("tr",{key:n},l.a.createElement("td",null,r.name),l.a.createElement("td",null,r.playlist_url),l.a.createElement("td",null,r.owner),l.a.createElement("td",null,r.owner_url),l.a.createElement("td",null,r.followers),l.a.createElement("td",null,document.getElementById("song-name").value),l.a.createElement("td",null,o),l.a.createElement("td",null,document.getElementById("fblink-".concat(r.id)).value||"nay"),l.a.createElement("td",null,""),l.a.createElement("td",null,document.getElementById("messaged-".concat(r.id)).checked?"yee":"nay"),l.a.createElement("td",null,document.getElementById("messaged-".concat(r.id)).checked?document.getElementById("user-name").value:""),l.a.createElement("td",null,""),l.a.createElement("td",null,document.getElementById("messaged-".concat(r.id)).checked?new Date(Date.now()).toLocaleDateString():""));ae(t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),he=m.map(function(e){return l.a.createElement("div",{style:{width:220,background:"#ccc",margin:10,padding:10,position:"relative"},key:e.id},l.a.createElement("img",{src:e.image,alt:"FB pic not loading - click to view",style:{width:"100%"},id:e.id,onClick:ge}),l.a.createElement("p",null,l.a.createElement("strong",null,e.owner)),l.a.createElement("p",null,e.name))}),be=E.map(function(e){return l.a.createElement("div",{key:e.id,style:{display:"flex",flexDirection:"row",width:"100%",margin:10}},l.a.createElement("a",{href:e.image,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:e.image,width:100,alt:"FB pic not loading - click to view"})),l.a.createElement("div",{style:{width:"40%"}},l.a.createElement("h3",{style:{margin:2,padding:5}},e.owner),l.a.createElement("h4",{style:{margin:2,padding:5}},e.name),l.a.createElement("p",{style:{margin:2,padding:5}},e.followers," followers")),l.a.createElement("div",{style:{display:"flex"}},l.a.createElement("a",{href:"https://www.facebook.com/search/people/?q=".concat(e.owner),style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer",onClick:function(){return ye(e)}},l.a.createElement(v.a,{variant:"contained",style:{width:210,marginTop:8,marginRight:5},color:JSON.parse(localStorage.getItem("previousOwners")).indexOf(e.ownerId)>-1?"default":"primary"},JSON.parse(localStorage.getItem("previousOwners")).indexOf(e.ownerId)>-1?"Owner in database":"Search on Facebook")),l.a.createElement(P.a,{style:{flex:1},label:"Paste FB Here",variant:"outlined",id:"fblink-".concat(e.id)}),l.a.createElement("br",null),l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",id:"messaged-".concat(e.id),name:"messaged",disabled:JSON.parse(localStorage.getItem("previousOwners")).indexOf(e.ownerId)>-1})," ","Messaged them")))}),ve=H.map(function(e){return l.a.createElement(_.a,{value:e.name,key:e.name},e.artist," - ",e.name)});return l.a.createElement(D.a,{fixed:!0,style:{marginTop:50}},l.a.createElement("h3",null,"1. Setup"),l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){localStorage.removeItem("token"),window.location.reload()}},"Get Spotify token"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(P.a,{id:"user-name",label:"Your Name (ex. Brandon Cathcart)",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement("br",null),l.a.createElement(F.a,{style:{minWidth:120,width:"50%"}},l.a.createElement(T.a,{id:"song-dropdown-label"},"Song"),l.a.createElement(R.a,{labelId:"song-dropdown-label",id:"demo-simple-select",variant:"outlined",value:ce,label:"Song to Promote",onChange:function(e){me(e.target.value)}},ve)),l.a.createElement("br",null),l.a.createElement(P.a,{id:"flavour-text",label:"Artist flavour text",variant:"outlined",disabled:!0,value:G[H.filter(function(e){return e.name===ce})[0].artist||""],style:{width:"100%",marginBottom:20,marginTop:20}}),l.a.createElement("br",null),l.a.createElement(P.a,{id:"previous-playlists",label:"Playlist URLs from spreadsheet",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement(P.a,{id:"previous-owners",label:"Owner URLs from spreadsheet",variant:"outlined",style:{width:"50%",marginBottom:20}}),l.a.createElement("br",null),l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=document.getElementById("previous-playlists").value,t=e.indexOf("https"),a=(e=e.substring(t)).split(" ");a=a.map(function(e,t){var a=e.lastIndexOf("/");return e.substring(a+1)}),localStorage.setItem("previousPlaylists",JSON.stringify(a));var n=document.getElementById("previous-owners").value;t=n.indexOf("https");var l=(n=n.substring(t)).split(" ");l=l.map(function(e,t){var a=e.lastIndexOf("/");return e.substring(a+1)}),localStorage.setItem("previousOwners",JSON.stringify(l)),localStorage.setItem("userName",document.getElementById("user-name").value),localStorage.setItem("songName",ce)}()}},"Save Setup"),l.a.createElement("h3",null,"2. Make sure the message looks good"),l.a.createElement(P.a,{style:{width:"50%",minHeight:300},label:"Small playlist message",variant:"outlined",multiline:!0,id:"message-small"}),l.a.createElement(P.a,{style:{width:"50%",minHeight:300},label:"Large playlist message",variant:"outlined",multiline:!0,id:"message-big"}),l.a.createElement(v.a,{variant:"contained",color:"primary",style:{marginTop:20,marginRight:10},onClick:function(){localStorage.setItem("message-small",document.getElementById("message-small").value),localStorage.setItem("message-big",document.getElementById("message-big").value)}},"Save Messages"),l.a.createElement(v.a,{variant:"contained",color:"primary",style:{marginTop:20},onClick:function(){ye({name:"Test Playlist",owner:"Beans McGee"})}},"Test Copy Message"),l.a.createElement("h3",null,"3. Search for playlists on Spotify"),l.a.createElement("div",null,l.a.createElement(P.a,{id:"outlined-basic",label:"Spotify Search Term",variant:"outlined",style:{width:"50%",marginBottom:20},onChange:function(e){i(e.target.value),console.log(e.key)},onKeyDown:function(e){"Enter"===e.key&&de()}}),l.a.createElement("br",null)),l.a.createElement("div",null,l.a.createElement("p",{style:{display:g>0?"block":"none"}},"Gathering 100 playlists out of ",X,"... Filtered"," ",L," unlikely names... Filtered"," ",V," previously logged playlists... Filtered"," ",re," without profile pictures... Returning"," ",m.length,".")),l.a.createElement("h3",null,"4. Pick promising playlists"),l.a.createElement("div",{style:{background:"green",display:"flex",flexDirection:"row",flexWrap:"wrap",borderRadius:20,marginTop:20}},he),l.a.createElement("br",null),l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return de()}},"Get 100 more"),l.a.createElement("h3",null,"5. Find and message them on Facebook"),l.a.createElement("ol",null,be),l.a.createElement("br",null),l.a.createElement("h3",null,"6. Generate text to paste into the tracking spreadsheet"),l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){return fe()}},"Generate Copy Text"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("table",{style:{width:"100%",border:"2px solid black"}},te),l.a.createElement("div",{style:{position:"fixed",display:O,width:"100%",height:50,background:"red",top:0,left:0,textAlign:"center"}},l.a.createElement("p",{style:{color:"white"}},"Error with Spotify request - please get new Spotify token (step 1)")))},Q=Object(w.b)(function(e){var t=e.token,a=Object(n.useState)(x.tokenms-Date.now()),r=Object(b.a)(a,2),o=r[0],i=r[1];Object(n.useEffect)(function(){var e=setInterval(function(){if(i(x.tokenms-Date.now()),o<1e3)try{e.clear()}catch(t){console.log("Tried to clear interval, could not. Oh well.")}},6e4)},[]);var s=Object(E.a)({url:"https://api.spotify.com/v1/me",method:"GET",headers:{Authorization:"Bearer "+t}}),c=Object(b.a)(s,1)[0],m=c.data,u=c.loading,d=c.error;return u&&console.log("Loading user..."),m&&(x.name=m.display_name,x.id=m.id),""!==x.id?l.a.createElement(M,{token:t}):d?l.a.createElement("div",null,l.a.createElement("p",null,"If you're seeing this, click this button, then refresh the page."),l.a.createElement(v.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("token","")}},"Clear Token")):l.a.createElement("div",null,l.a.createElement("p",null,"Loading..."))});a(213);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var l=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var V=Object(p.a)({palette:{primary:{main:"#0a5e54"},secondary:{main:"#ede8e5"}}}),K=function(e){Object(c.a)(a,e);var t=q(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=h.access_token||localStorage.getItem("token");h.access_token&&(x.tokenms=Date.now()+18e5),e&&(this.setState({token:e}),localStorage.setItem("token",e),x.token=e)}},{key:"clearLocalStorage",value:function(){localStorage.setItem("token","")}},{key:"render",value:function(){return l.a.createElement(g.a,{theme:V},l.a.createElement("header",null,l.a.createElement("div",{className:"App"},l.a.createElement("div",null,!this.state.token&&l.a.createElement("div",{className:"App-header"},l.a.createElement(y.a,{variant:"h1",component:"h1",style:{textShadow:"0px 5px 10px rgba(0,0,0,0.9)"}},"Playpasting Time"),l.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("149f235f7ad941419d900b585b05d9e3","&redirect_uri=").concat("https://brandoshizzle.github.io/Playpaster/","&scope=").concat(d.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")))),this.state.token&&l.a.createElement(Q,{token:this.state.token})))}}]),a}(n.Component);o.a.render(l.a.createElement(K,null),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.a3394b2a.chunk.js.map